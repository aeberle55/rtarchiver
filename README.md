# rtarchiver
Archive threads, journals, and images from the legacy Roosterteeth site

Note that the [RT ToU](https://roosterteeth.com/terms-of-use) Section 14 disallows the scraping of the site. This project has been exempt from that rule by RoosterTeeth.

## Setup
To use, download the latest executable for either Windows or Linux on the [Releases page](https://github.com/aeberle55/rtarchiver/releases). At this time OsX does not have an executable, but best guess instructions are provided below for running it. If you are tech savvy, have access to an OsX system, and would like to help build an executable file please get in contact.

The downloaded executable can be run like any other program. See the Usage section for details on how to use the program.

## Usage
This program can be used to scrape various public data from the Legacy RoosterTeeth Site and save to a local device. Specificially, it can save a user's journals, images, or friends list, or download a forum thread. Once an action is completed the program will complete.

### General
The Current Directory icon refers to the directory files will be saved in. At this time there is no support for custom file names, and be aware files generated by the same function will be overwritten unless moved.

If a function is halted by pressing the Stop button or exiting the program, it will attempt to save anything currently downloaded. Using the Stop button is prefered as it is more graceful than exiting.

The `archive.log` file is a log file generated in the same directory as the executable. This contains debug information useful for debugging and should be included with any error reports.

### Journals
Selecting the Scrape Journals radio button will allow the user to scrape all journals created by the given username. All public journals will be downloaded to a folder created at the directory selected. The folder name will be the username and the journals will be stored under the subfolder `journals`. The generated files will be html documents with ascending file names. The newest journals will be in the lowest numbered file and at the top of the page. Note that all embedded images are hot linked, so require an internet connection to view.

You can specify Max Downloaded Journals to give a maximum number of posts to download. It defaults to 0 or unlimited. The Journals per file option controls how many posts are written to a given file to prevent any one file from getting too large.

Note that duplicate journals will be ignored.

### Images
The Scrape Images will download all images currently in a user's gallery, including those in albums. They will be stored starting at the specified directory inside a folder named for the username and in a subfolder titled `images`. Further subfolders for individual albums may be present. The titles of the images are the names they were stored under by the RT site.

As before, the username field is the name of the user whose gallery is to be scraped. The Max Downloaded Images field is the maximum number of images to be downloaded before halting. At 0 it will download all images.

This function will not overwrite images if it finds they were already downloaded previously.

### Forums
Scraping a Forum records all posts on a forum thread and formats them into a series of basic HTML documents. As with journals, these files are numbered in ascending order, but with the lowest number being the oldest posts. They will be created in a subdirectory named for the thread title with spaces and special characters removed. All images and embedded objects in the threads are hotlinked, so require internet access to view.

You are required to enter the URL of the thread, though this can be the URL of any page. Max scraped pages puts a cap in the number of pages accessed with 0 meaning to read them all. Pages per file represents how many scraped forum pages are put into each file.

Only publicly accessible forums can be scraped at this time. Private groups cannot be scraped.

### Friends
This option gives the ability to download your friends list into a text file. Currently the file is line break delineated, which means each username is on its own line of the text file.

You must provide the username of the user to be scraped. The Max Friends field indicates the maximum number of friends to put into the text file, with 0 being all of the friends.

## Building Instructions

### Windows 10
To build, with PyInstaller run:
`PyInstaller --windowed --onefile -n rtarchiver_windows archive_gui.py`
This will create an executable file with the name `rtarchiver_windows.exe`

Run the executable like any other Windows application

### Linux
To build, with PyInstaller run:
`pyinstaller --onefile -n rtarchiver_linux archive_gui.py`
This will create an executable file with the name `rtarchiver_linux`

Run the executable like any other Linux application

### OSX
I will provide detailed setup and build instructions as at this time I do not have access to an OSX machine to build.

Open a  Terminal

Install Homebrew (what's called a package manager) by running:

    /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

Follow the prompts it gives. For more details, visit https://brew.sh/

Run the following in Terminal:

    brew install python@2

If it can't find brew, you many need to edit your PATH variable by running:

    open -e ~/.profile

And then adding the following line to the bottom:

    export PATH="/usr/local/bin:/usr/local/sbin:$PATH"

Try to run the following command:

    python2 -V

If that fails because it can't locate python, run:

    open -e ~/.profile

And add this line to the bottom:

    export PATH="/usr/local/opt/python@2/libexec/bin:$PATH"

Install the dependencies by running:

    pip2 install requests
    pip2 install beautifulsoup4
    pip2 install pyinstaller

Download the RTArchiver source code from this link: https://github.com/aeberle55/rtarchiver/archive/master.zip

Extract the source code

Open a Terminal window or use an existing one and change directory to the directory created when extracting the code. e.g. If you extracted it in your Downloads folder you would run:

    cd ~/Downloads/master/

Verify you can run the archiver by running:

    python2 archive_gui.py

Now run the following:

    pyinstaller --onefile -n rtarchiver_mac archive_gui.py

This should create an executable called `rtarchiver_mac` under a new directory called `dist` under the current directory. Navigate to this directory in your file explorer and then attempt to run the program

## Version History
### 0.1
* Initial working code and documentation
### 0.2
* Many tweaks for GUI specific functionality
* Makes archivers threaded objects
* Adds multithreading to Image Link Downloads
* Many bugfixes and improvements
### 0.3 (Initial Beta)
* Fixes issues related to Windows compatibility
### 0.4
* Adds feature to scrape friends list
* (0.4.1) Fixes bug in forum scraping code that only downloaded first page

## Technical Information
### Script instructions
The raw python scripts can be run by anyone with Python2.7 installed on their computer. They require the package BeautifulSoup4, installation instructions for which can be found [here](https://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-beautiful-soup). Also required is the requests library. Run the `archive_gui.py` script to use the GUI. You can also run `scrape_forum.py` to scrape a forum from the CLI or `scrape_user.py` for journals or images.

## Potential Future Features/Improvements
* Add option to download images embedded in forum posts and journals to local storage
* Add option to compress output into an archive
* Improve forum thread reply links to work between files
